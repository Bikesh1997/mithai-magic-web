import React, {useRef, useEffect, useState} from 'react';import { io } from 'socket.io-client';const socket = io('http://localhost:5000');export default function Whiteboard(){const canvasRef=useRef();const [room,setRoom]=useState('white-room');useEffect(()=>{socket.emit('join-room',{roomId:room,type:'whiteboard'});socket.on('whiteboard-draw',(draw)=>{const ctx=canvasRef.current.getContext('2d');ctx.beginPath();ctx.moveTo(draw.x0,draw.y0);ctx.lineTo(draw.x1,draw.y1);ctx.stroke();});},[room]);useEffect(()=>{const ctx=canvasRef.current.getContext('2d');ctx.lineWidth=2;},[]);const drawing=useRef(false);const last=useRef({x:0,y:0});function start(e){drawing.current=true;const rect=canvasRef.current.getBoundingClientRect();last.current={x:e.clientX-rect.left,y:e.clientY-rect.top}}function move(e){if(!drawing.current)return;const rect=canvasRef.current.getBoundingClientRect();const x=e.clientX-rect.left,y=e.clientY-rect.top;const ctx=canvasRef.current.getContext('2d');ctx.beginPath();ctx.moveTo(last.current.x,last.current.y);ctx.lineTo(x,y);ctx.stroke();socket.emit('whiteboard-draw',{roomId:room,draw:{x0:last.current.x,y0:last.current.y,x1:x,y1:y}});last.current={x,y}}function end(){drawing.current=false}return <div><h2>Collaborative Whiteboard</h2><div style={{marginBottom:8}}>Room: <input value={room} onChange={e=>setRoom(e.target.value)} /></div><canvas ref={canvasRef} width={900} height={420} style={{border:'1px solid #ccc'}} onMouseDown={start} onMouseMove={move} onMouseUp={end} onMouseLeave={end} /></div>}